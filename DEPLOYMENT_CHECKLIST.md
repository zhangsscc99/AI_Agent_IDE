# ✅ 部署检查清单

## 📋 部署前准备

### 代码准备
- [ ] 代码已提交到 Git
- [ ] 所有功能已测试通过
- [ ] 没有未提交的更改
- [ ] `.env` 文件已创建（不提交到 Git）

### 环境检查
- [ ] Node.js 版本 >= 20
- [ ] npm 已安装
- [ ] GLM_API_KEY 已准备好
- [ ] 网络连接正常

### 构建测试
- [ ] 本地构建成功：`npm run build`
- [ ] 本地运行正常：`npm start`
- [ ] 所有 API 接口正常
- [ ] 前端页面正常显示

---

## 🚀 部署步骤

### Vercel 部署
- [ ] 已安装 Vercel CLI：`npm i -g vercel`
- [ ] 已登录 Vercel：`vercel login`
- [ ] 已配置环境变量：`vercel env add GLM_API_KEY`
- [ ] 已部署到生产环境：`vercel --prod`
- [ ] 已测试访问域名

### Docker 部署
- [ ] 已安装 Docker 和 Docker Compose
- [ ] 已创建 `.env` 文件
- [ ] 已构建镜像：`docker-compose build`
- [ ] 已启动服务：`docker-compose up -d`
- [ ] 已检查日志：`docker-compose logs -f`
- [ ] 已测试访问：`http://localhost:3000`

### 服务器部署
- [ ] 服务器已准备（Ubuntu/CentOS）
- [ ] Node.js 20+ 已安装
- [ ] PM2 已安装：`npm i -g pm2`
- [ ] 项目已克隆到服务器
- [ ] 依赖已安装：`npm install --production`
- [ ] 环境变量已配置
- [ ] 项目已构建：`npm run build`
- [ ] PM2 已启动：`pm2 start ecosystem.config.js`
- [ ] PM2 已设置开机自启：`pm2 startup && pm2 save`
- [ ] Nginx 已配置（如需要）
- [ ] SSL 证书已配置（如需要）

---

## 🔍 部署后验证

### 功能测试
- [ ] 首页可以访问
- [ ] 文件浏览器正常显示
- [ ] 代码编辑器正常加载
- [ ] AI 对话功能正常
- [ ] 文件上传功能正常
- [ ] 代码修改审批功能正常
- [ ] 代码库索引功能正常（如已实现）

### API 测试
- [ ] `/api/health` 返回正常
- [ ] `/api/workspace/files` 正常
- [ ] `/api/agent/chat` 正常
- [ ] `/api/codebase/index` 正常（如已实现）
- [ ] `/api/codebase/search` 正常（如已实现）

### 性能测试
- [ ] 页面加载速度 < 3 秒
- [ ] API 响应时间 < 2 秒
- [ ] 内存使用正常
- [ ] CPU 使用正常

---

## 🔒 安全检查

- [ ] 环境变量未暴露在前端代码
- [ ] API Key 已正确配置
- [ ] HTTPS 已启用（生产环境）
- [ ] CORS 已正确配置
- [ ] 文件上传大小限制已设置
- [ ] 错误信息不泄露敏感信息

---

## 📊 监控配置

- [ ] 日志系统已配置
- [ ] 错误追踪已配置（如 Sentry）
- [ ] 性能监控已配置
- [ ] 健康检查已配置
- [ ] 告警通知已配置

---

## 🐛 常见问题处理

### 构建失败
- [ ] 检查 Node.js 版本
- [ ] 检查内存是否充足
- [ ] 检查依赖是否正确安装
- [ ] 查看构建日志错误信息

### 运行错误
- [ ] 检查环境变量是否正确
- [ ] 检查端口是否被占用
- [ ] 检查文件权限
- [ ] 查看应用日志

### 性能问题
- [ ] 检查服务器资源使用
- [ ] 检查数据库连接
- [ ] 检查网络延迟
- [ ] 优化代码和配置

---

## 📝 部署记录

### 部署信息
- **部署日期：** ___________
- **部署方式：** ___________
- **部署环境：** ___________
- **版本号：** ___________

### 环境变量
- **GLM_API_KEY：** ✅ 已配置
- **LLM_API_KEY：** ___________
- **WORKSPACE_PATH：** ___________
- **PORT：** ___________

### 访问信息
- **域名/IP：** ___________
- **端口：** ___________
- **HTTPS：** ✅ / ❌

---

## 🎯 下一步

部署完成后：
1. 通知团队成员
2. 更新文档
3. 监控运行状态
4. 收集用户反馈
5. 准备后续优化

---

**部署完成后，记得更新此清单！** ✅

